<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>portloop.xyz - half baked thoughts</title>
<style>
@font-face {
  font-family: 'Fixedsys';
  src: url('FSEX302.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
  width: 100%; height: 100%;
  background: #008080;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  font-family: "Microsoft Sans Serif", "Tahoma", "Arial", sans-serif;
  font-size: 11px;
  user-select: auto;
  -webkit-font-smoothing: none;
}

/* ── Window Frame ── */
.win95-window {
  width: 60%;
  height: 60%;
  min-width: 420px;
  min-height: 320px;
  background: #c0c0c0;
  display: flex;
  flex-direction: column;
  padding: 3px;
  box-shadow:
    inset -1px -1px 0 #000000,
    inset 1px 1px 0 #ffffff,
    inset -2px -2px 0 #808080,
    inset 2px 2px 0 #dfdfdf;
}

/* ── Title Bar ── */
.title-bar {
  background: linear-gradient(90deg, #000080, #1084d0);
  padding: 2px 2px 2px 3px;
  display: flex;
  align-items: center;
  gap: 3px;
  flex-shrink: 0;
  height: 20px;
}

.title-bar-icon {
  width: 16px; height: 16px;
  flex-shrink: 0;
  image-rendering: pixelated;
}

.title-bar-text {
  color: #ffffff;
  font-weight: normal;
  font-size: 16px;
  font-family: 'Fixedsys', 'Fixedsys Excelsior 3.01', 'Terminal', 'Courier New', monospace;
  flex: 1;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  padding-top: 1px;
}

.title-bar-controls {
  display: flex;
  gap: 2px;
  flex-shrink: 0;
}

.title-btn {
  width: 16px; height: 14px;
  background: #c0c0c0;
  border: none;
  font-size: 10px;
  font-family: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: default;
  padding: 0;
  box-shadow:
    inset -1px -1px 0 #000,
    inset 1px 1px 0 #fff,
    inset -2px -2px 0 #808080,
    inset 2px 2px 0 #dfdfdf;
}
.title-btn:active {
  box-shadow:
    inset 1px 1px 0 #000,
    inset -1px -1px 0 #fff,
    inset 2px 2px 0 #808080;
  padding: 1px 0 0 1px;
}

/* ── Menu Bar ── */
.menu-bar {
  display: flex;
  flex-shrink: 0;
  height: 18px;
  align-items: stretch;
  border-bottom: 1px solid #808080;
}

.menu-item {
  padding: 1px 8px 0;
  cursor: default;
  font-size: 11px;
  color: #000;
  display: flex;
  align-items: center;
}
.menu-item:hover {
  background: #000080;
  color: #fff;
}
.menu-item u { text-decoration: underline; }

/* ── Content Area ── */
.content-frame {
  flex: 1;
  margin: 2px 0;
  overflow: hidden;
  box-shadow:
    inset 1px 1px 0 #808080,
    inset -1px -1px 0 #dfdfdf,
    inset 2px 2px 0 #000,
    inset -2px -2px 0 #fff;
}

.content {
  width: 100%;
  height: 100%;
  background: #fff;
  overflow-y: auto;
  padding: 2px 4px;
  font-family: 'Fixedsys', 'Fixedsys Excelsior 3.01', 'Terminal', 'Courier New', monospace;
  font-size: 16px;
  line-height: 1.4;
  color: #000;
  cursor: default;
  outline: none;
}

/* Win95 scrollbar */
.content::-webkit-scrollbar { width: 16px; }
.content::-webkit-scrollbar-track {
  background: repeating-conic-gradient(#c0c0c0 0% 25%, #fff 0% 50%) 50% / 2px 2px;
}
.content::-webkit-scrollbar-thumb {
  background: #c0c0c0;
  box-shadow:
    inset -1px -1px 0 #000,
    inset 1px 1px 0 #fff,
    inset -2px -2px 0 #808080,
    inset 2px 2px 0 #dfdfdf;
}
.content::-webkit-scrollbar-button:single-button {
  background: #c0c0c0;
  display: block;
  height: 16px;
  box-shadow:
    inset -1px -1px 0 #000,
    inset 1px 1px 0 #fff,
    inset -2px -2px 0 #808080,
    inset 2px 2px 0 #dfdfdf;
}

/* ── Article List ── */
.article-line {
  padding: 1px 4px;
  white-space: nowrap;
  cursor: default;
}
.article-line:hover:not(.selected) {
  background: rgba(0, 0, 128, 0.08);
}
.article-line.selected {
  background: #000080;
  color: #fff;
}

/* ── Article View ── */
.back-hint {
  padding: 2px 4px 6px;
  cursor: pointer;
  color: #a0a0a0;
}

.article-heading {
  padding: 0 4px 2px;
}

.article-rule {
  padding: 0 4px 6px;
  color: #a0a0a0;
}

.article-body {
  padding: 0 4px;
  white-space: pre-wrap;
  word-wrap: break-word;
}
</style>
</head>
<body>

<div class="win95-window">

  <!-- Title Bar -->
  <div class="title-bar">
    <svg class="title-bar-icon" viewBox="0 0 16 16" fill="none">
      <rect x="4" y="1" width="10" height="14" fill="#ffffc0" stroke="#808080" stroke-width=".6"/>
      <rect x="2" y="0" width="3" height="16" fill="#8080c0" stroke="#000080" stroke-width=".4"/>
      <line x1="6" y1="5" x2="13" y2="5" stroke="#000080" stroke-width=".7"/>
      <line x1="6" y1="8" x2="13" y2="8" stroke="#000080" stroke-width=".7"/>
      <line x1="6" y1="11" x2="11" y2="11" stroke="#000080" stroke-width=".7"/>
    </svg>
    <span class="title-bar-text">portloop.xyz - half baked thoughts</span>
    <div class="title-bar-controls">
      <button class="title-btn" aria-label="Minimize"><span style="font-weight:bold;font-size:11px;margin-top:3px">_</span></button>
      <button class="title-btn" aria-label="Maximize"><span style="font-size:9px">◻</span></button>
      <button class="title-btn" aria-label="Close"><span style="font-weight:bold;font-size:11px">×</span></button>
    </div>
  </div>

  <!-- Menu Bar -->
  <div class="menu-bar">
    <span class="menu-item"><u>F</u>ile</span>
    <span class="menu-item"><u>E</u>dit</span>
    <span class="menu-item"><u>S</u>earch</span>
    <span class="menu-item"><u>H</u>elp</span>
  </div>

  <!-- Content -->
  <div class="content-frame">
    <div class="content" id="content" tabindex="0"></div>
  </div>


</div>

<script>
let articles = [];
let sel = 0;
let view = 'list';
const contentEl = document.getElementById('content');

function formatTitle(a) {
  let t = '';
  if (a.date) {
    const [y, m, d] = a.date.split('-');
    t += d + '.' + m + '.' + y + ' - ';
  }
  t += a.title;
  if (a.tag) t += ' // ' + a.tag;
  return t;
}

async function loadArticles() {
  try {
    const res = await fetch('articles.json');
    const data = await res.json();
    articles = data.map(a => ({
      title: formatTitle(a),
      body: a.body
    }));
  } catch (e) {
    articles = [{ title: 'no articles yet', body: 'check back later.' }];
  }
  sel = 0;
  showList();
}

function showList() {
  view = 'list';
  contentEl.innerHTML = '';
  const spacer = document.createElement('div');
  spacer.className = 'article-line';
  spacer.innerHTML = '&nbsp;';
  contentEl.appendChild(spacer);
  articles.forEach((a, i) => {
    const el = document.createElement('div');
    el.className = 'article-line' + (i === sel ? ' selected' : '');
    el.textContent = a.title;
    el.addEventListener('click', () => { sel = i; showList(); });
    el.addEventListener('dblclick', () => { sel = i; openArticle(); });
    contentEl.appendChild(el);
  });
}

function openArticle() {
  view = 'article';
  const a = articles[sel];
  contentEl.innerHTML = '';

  const back = document.createElement('div');
  back.className = 'back-hint';
  back.textContent = '← back [ESC]';
  back.addEventListener('click', showList);
  contentEl.appendChild(back);

  const h = document.createElement('div');
  h.className = 'article-heading';
  h.textContent = a.title;
  contentEl.appendChild(h);

  const rule = document.createElement('div');
  rule.className = 'article-rule';
  rule.textContent = '─'.repeat(36);
  contentEl.appendChild(rule);

  const body = document.createElement('div');
  body.className = 'article-body';
  body.textContent = a.body;
  contentEl.appendChild(body);

  contentEl.scrollTop = 0;
}

document.addEventListener('keydown', e => {
  if (view === 'list') {
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      if (sel < articles.length - 1) { sel++; showList(); }
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (sel > 0) { sel--; showList(); }
    } else if (e.key === 'Enter') {
      e.preventDefault();
      openArticle();
    }
  } else {
    if (e.key === 'Escape' || e.key === 'Backspace') {
      e.preventDefault();
      showList();
    }
  }
});

loadArticles();
</script>

</body>
</html>
